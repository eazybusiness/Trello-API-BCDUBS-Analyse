# Checklist Email Notifier

This project includes a small notifier script that emails you when a Trello card's checklist becomes complete.

It reads from `trello_cards_detailed.json` (generated by `trello_client.py`) and keeps a small local state file so you do not receive duplicate emails.

## 1) .env configuration

Add these variables to your `.env` (this file stays gitignored):

- `SMTP_HOST=`
- `SMTP_PORT=`
- `SMTP_USER=`
- `SMTP_PASSWORD=`
- `SMTP_TLS=1` (set to `0` to disable STARTTLS)
- `EMAIL_TO=`
- `EMAIL_FROM=` (optional; defaults to `SMTP_USER`)

## 2) Run manually

From the project folder:

```bash
source venv/bin/activate
python3 notify_checklist_completed.py
```

If you want to attempt downloading direct `.mp3`/`.wav` URLs (only works for direct download links; many hosts will still require manual download):

```bash
source venv/bin/activate
python3 notify_checklist_completed.py --download
```

Downloaded files (if any) will be stored in `downloads/audio/`.

## 3) Run via cron

Typical flow:

1. Run `trello_client.py` to refresh `trello_cards_detailed.json`
2. Run `notify_checklist_completed.py`

Example (adjust paths):

```cron
*/10 * * * * /home/YOUR_USER/CascadeProjects/trello_api/venv/bin/python3 /home/YOUR_USER/CascadeProjects/trello_api/trello_client.py && /home/YOUR_USER/CascadeProjects/trello_api/venv/bin/python3 /home/YOUR_USER/CascadeProjects/trello_api/notify_checklist_completed.py
```

## Notes / limitations

- The email contains **all links found in comments and attachments**.
- Direct `.mp3`/`.wav` URLs can be downloaded automatically; Dropbox/Google Drive/Mega links often require manual download depending on share settings.
